<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>waterapputils &mdash; waterapputils 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="waterapputils 1.0.0 documentation" href="index.html" />
    <link rel="next" title="General Guide" href="guide.html" />
    <link rel="prev" title="Welcome to waterapputils’s documentation!" href="index.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo.png" border="0" alt="py4sci"/></a>
</div>


      <div class="header"><h1 class="heading"><a href="index.html">
          <span>waterapputils 1.0.0 documentation</span></a></h1>
        <h2 class="heading"><span>waterapputils</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Welcome to waterapputils&#8217;s documentation!</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="guide.html">General Guide</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <p><a class="reference external" href="http://www.usgs.gov/"><img alt="alt text" src="_images/usgs-logo.png" /></a></p>
<div class="section" id="waterapputils">
<h1>waterapputils<a class="headerlink" href="#waterapputils" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><strong>waterapputils</strong> is a tool used for analyzing, processing, and updating
model simulations from the <a class="reference external" href="http://ky.water.usgs.gov/">U.S. Geological Survey Indiana and Kentucky
Water Science Centers (INKY)</a> WATER
application. <strong>waterapputils</strong> is written in
<a class="reference external" href="https://www%20.python.org/">Python</a>, and adds new functionality,
outside the WATER application, by allowing users to apply various future
climate projections using a change-factor (delta) approach with data
from the Coupled Model Intercomparison Project
(<a class="reference external" href="http://cmip-pcmdi.llnl.gov/cmip5/">CIMP5</a>), and aggregated water
use data to model simulations.</p>
<p>The WATER application is a graphical user interface, written in VB.NET,
wrapped around a variant of the rainfall-runoff model called Topmodel
(Topography based hydrological mode) by Keith Beven, Professor at
Lancaster University. Topmodel estimates river discharge and spatial
soil water saturation patterns for a particular catchment basin using
topographic, climatic, and geological input data parameters. The
original WATER application was developed by the <a class="reference external" href="http://ky.water.usgs.gov/">U.S. Geological Survey
Indiana and Kentucky Water Science Centers
(INKY)</a>. References for the WATER
application include:</p>
<ul class="simple">
<li><a class="reference external" href="http://pubs.usgs.gov/sir/2009/5248/">Williamson T.N., Odom K.R., Newson J.K., Downs A.C., Nelson Jr.
H.L., Cinotto P.J., Ayers M.A. 2009. The Water Availability Tool for
Environmental Resources (WATER)—A water-budget modeling approach for
managing water-supply resources in Kentucky—Phase I—Data processing,
model development, and application to non-karst areas, U.S.
Geological Survey Scientific Investigations Report 2009-5248. pp.
34.</a></li>
<li><a class="reference external" href="https://www.soils.org/publications/sssaj/abstracts/77/3/877">Williamson T.N., Taylor C.J., Newson J.K. 2013. Significance of
Exchanging SSURGO and STATSGO Data When Modeling Hydrology in Diverse
Physiographic Terranes. Soil Science Society of America Journal
77:877-889. DOI:
10.2136/sssaj2012.0069.</a></li>
</ul>
<p>Some sample highlights of <strong>waterapputils</strong> include:</p>
<ul class="simple">
<li>Processes WATER simulation output files (<tt class="docutils literal"><span class="pre">txt</span></tt> format).</li>
<li>Processes WATER simulation database files that store information
about a particular model simulation (<tt class="docutils literal"><span class="pre">xml</span></tt> format).</li>
<li>Applies various statistically downscaled <strong>global climate models</strong>
([GCMs]) to model simulations for a particular watershed basin or set
of watershed basins based on the spatial intersection of the
watershed(s) of interest with the global climate change scenario
coverage of interest.</li>
<li>Applies <strong>water use</strong> data to model simulations for a particular for
a particular watershed basin or set of watershed basins based on the
spatial intersection of the watershed(s) of interest with the water
use coverage.</li>
<li>Generates plots of all parameters found in WATER output files
(<tt class="docutils literal"><span class="pre">txt</span></tt> format) with simple statistics.</li>
<li>Generates plots of timeseries parameters found in WATER simulation
database files (<tt class="docutils literal"><span class="pre">xml</span></tt> format).</li>
<li>Generates comparison and difference plots between two WATER
simulation output files.</li>
<li>Generates comparison and difference plots between two WATER
simulation database files.</li>
<li>Generates maps of study area for a particular model simulation using
<a class="reference external" href="http://matplotlib.org/basemap/">basemap</a></li>
<li>Logs errors and tracebacks.</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="version">
<h2>Version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h2>
<p>1.0.0</p>
</div>
<hr class="docutils" />
<div class="section" id="command-line-interface-to-waterapputils">
<h2>Command line interface to <strong>waterapputils</strong><a class="headerlink" href="#command-line-interface-to-waterapputils" title="Permalink to this headline">¶</a></h2>
<div class="section" id="usage">
<h3>Usage:<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py [option]
</pre></div>
</div>
</div>
<div class="section" id="command-line-arguments-for-waterapputils">
<h3>Command line arguments for <strong>waterapputils</strong>:<a class="headerlink" href="#command-line-arguments-for-waterapputils" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Commands</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-h</span></tt></td>
<td>show list of available commands</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-watertxt</span></tt></td>
<td>list WATER simulation output file(s) to process; <tt class="docutils literal"><span class="pre">WATER.txt</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-watertxtfd</span></tt></td>
<td>open file dialog window to select WATER simulation output file(s) to process; <tt class="docutils literal"><span class="pre">WATER.txt</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-watertxtcmp</span></tt></td>
<td>list 2 WATER simulation output file(s) to compare; <tt class="docutils literal"><span class="pre">WATER.txt</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-watertxtcmpfd</span></tt></td>
<td>open file dialog window to select 2 WATER simulation output file(s) to compare; <tt class="docutils literal"><span class="pre">WATER.txt</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-waterxml</span></tt></td>
<td>list WATER simulation database file(s) to process; <tt class="docutils literal"><span class="pre">WATERSimulation.xml</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-waterxmlfd</span></tt></td>
<td>open file dialog window to select WATER simulation database file(s) to process; <tt class="docutils literal"><span class="pre">WATERSimulation.xml</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-waterxmlcmp</span></tt></td>
<td>list 2 WATER simulation database file(s) to compare; <tt class="docutils literal"><span class="pre">WATERSimulation.xml</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-waterxmlcmpfd</span></tt></td>
<td>open file dialog window to select 2 WATER simulation database files to compare; <tt class="docutils literal"><span class="pre">WATERSimulation.xml</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-applygcmdeltas</span></tt></td>
<td>apply global climate change deltas to WATER simulation database file(s); <tt class="docutils literal"><span class="pre">WATERSimulation.xml</span></tt>; details specified in <tt class="docutils literal"><span class="pre">user_settings.py</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-applysubgcmdeltas</span></tt></td>
<td>apply updated global climate change deltas from <tt class="docutils literal"><span class="pre">sub_gcm_delta_info_file_name</span></tt> variable in user_settings.py to WATER simulation database file(s); <tt class="docutils literal"><span class="pre">WATERSimulation.xml</span></tt>; details specified in <tt class="docutils literal"><span class="pre">user_settings.py</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-applywateruse</span></tt></td>
<td>apply water use data to WATER simulation output file(s); <tt class="docutils literal"><span class="pre">WATER.txt</span></tt>; details specified in <tt class="docutils literal"><span class="pre">user_settings.py</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-applysubwateruse</span></tt></td>
<td>apply water use data from <tt class="docutils literal"><span class="pre">sub_wateruse_info_file_name</span></tt> variable in user_settings.py to WATER simulation output file(s); <tt class="docutils literal"><span class="pre">WATER.txt</span></tt>; details specified in <tt class="docutils literal"><span class="pre">user_settings.py</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-oasis</span></tt></td>
<td>create output data file(s) for OASIS program; tab delimited file(s) of timeseries of discharge</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-ecoflowstationid</span></tt></td>
<td>create output data file(s) for ecoflow program; comma separated file(s) of timeseries of discharge for a specific basin (station) id</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-ecoflowdaxml</span></tt></td>
<td>create output data file(s) for ecoflow program; comma separated file(s) of basin (station) id and its respective drainage area in square miles calculated using data in the <tt class="docutils literal"><span class="pre">WATERSimulation.xml</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-ecoflowdashp</span></tt></td>
<td>create output data file(s) for ecoflow program; comma separated file(s) of basin (station) id and its respective drainage area in square miles calculated from the shapefile(s)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-outfilename</span></tt></td>
<td>OPTIONAL : output filename to be used with <tt class="docutils literal"><span class="pre">-ecoflowdaxml</span></tt> or <tt class="docutils literal"><span class="pre">-ecoflowdashp</span></tt> commands in writing the drainage area comma separated file</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-labelfield</span></tt></td>
<td>OPTIONAL : label field name (basin number / station id) to be used with <tt class="docutils literal"><span class="pre">-ecoflowdashp</span></tt> command in writing the drainage area comma separated file; Default label field is the FID in the basin(s) shapefile</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-areafield</span></tt></td>
<td>OPTIONAL : area field name in a basin(s) shapefile to be used with <tt class="docutils literal"><span class="pre">-ecoflowdashp</span></tt> command in writing the drainage area comma separated file; Default action is to calculate area from the shapefile(s)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-samplesingle</span></tt></td>
<td>OPTIONAL : flag used with <tt class="docutils literal"><span class="pre">-applywateruse</span></tt>, <tt class="docutils literal"><span class="pre">-applysubwateruse</span></tt>, <tt class="docutils literal"><span class="pre">-applygcmdeltas</span></tt>, <tt class="docutils literal"><span class="pre">-applysubgcmdeltas</span></tt> to specify the use of the sample single simulation datasets</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-samplebatch</span></tt></td>
<td>OPTIONAL : flag used with <tt class="docutils literal"><span class="pre">-applywateruse</span></tt>, <tt class="docutils literal"><span class="pre">-applysubwateruse</span></tt>, <tt class="docutils literal"><span class="pre">-applygcmdeltas</span></tt>, <tt class="docutils literal"><span class="pre">-applysubgcmdeltas</span></tt> to specify the use of the sample batch simulation datasets</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-simdir</span></tt></td>
<td>OPTIONAL : flag used with <tt class="docutils literal"><span class="pre">-applywateruse</span></tt>, <tt class="docutils literal"><span class="pre">-applysubwateruse</span></tt>, <tt class="docutils literal"><span class="pre">-applygcmdeltas</span></tt>, <tt class="docutils literal"><span class="pre">-applysubgcmdeltas</span></tt> to specify a path to a specific WATER simulation instead of specifying it in <tt class="docutils literal"><span class="pre">user_settings.py</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-processing-a-water-txt-file">
<h3>Example - processing a WATER.txt file<a class="headerlink" href="#example-processing-a-water-txt-file" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py -watertxt &lt;path-to-WATER.txt-file&gt;
</pre></div>
</div>
</div>
<div class="section" id="example-running-water-use-using-the-settings-in-user-settings-py">
<h3>Example - Running water use using the settings in user_settings.py<a class="headerlink" href="#example-running-water-use-using-the-settings-in-user-settings-py" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py -applywateruse
</pre></div>
</div>
</div>
<div class="section" id="example-running-water-use-by-supplying-a-path-to-a-simulations-directory-instead-of-specifying-the-simulations-directory-in-user-settings-py">
<h3>Example - Running water use by supplying a path to a simulations directory instead of specifying the simulations directory in user_settings.py<a class="headerlink" href="#example-running-water-use-by-supplying-a-path-to-a-simulations-directory-instead-of-specifying-the-simulations-directory-in-user-settings-py" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py -applywateruse -simdir &lt;path-to-simulations-directory&gt;
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="editing-settings-in-user-settings-py">
<h2>Editing settings in <a class="reference external" href="waterapputils/user_settings.py">user_settings.py</a><a class="headerlink" href="#editing-settings-in-user-settings-py" title="Permalink to this headline">¶</a></h2>
<p>All the setting for running <strong>waterapputils</strong> are contained in
<a class="reference external" href="waterapputils/user_settings.py">user_settings.py</a> file. A user can
edit the settings by editing the Python string variables. Most variables
are <em>path</em> variables to required data files and basin shapefile
attribute variables. A user will typically only edit the section called
<em>WATER simulation information</em>. This section contains information about
a WATER simulation. A WATER simulation can be either a <em>single</em>
simulation or a <em>batch</em> simulation. Each simulation type has a few
different outputs along with a different directory structure.</p>
</div>
<hr class="docutils" />
<div class="section" id="run-sample-datasets-with-run-sample-datasets-sh">
<h2>Run sample datasets with <a class="reference external" href="run_sample_datasets.sh">run_sample_datasets.sh</a><a class="headerlink" href="#run-sample-datasets-with-run-sample-datasets-sh" title="Permalink to this headline">¶</a></h2>
<p>The shell script <a class="reference external" href="run_sample_datasets.sh">run_sample_datasets.sh</a>
is a shell script that can be used to run automated tests and run many
of the command line arguments using the <a class="reference external" href="data/sample-water-simulations">sample
datasets</a>.</p>
<div class="section" id="id1">
<h3>Usage:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_sample_datasets.sh [option]
$ run_sample_datasets.sh [[[-txt] [-xml] [-wateruse] [-oasis] [-ecoflowstationid] [ecoflowdaxml] [-ecoflowdashp] [-gcmdelta] [-mapsim] [-all] [-tests] -makeclean] | [-h]]
</pre></div>
</div>
</div>
<div class="section" id="command-line-arguments-for-the-shell-script-run-sample-datasets-sh">
<h3>Command line arguments for the shell script <a class="reference external" href="run_sample_datasets.sh">run_sample_datasets.sh</a>:<a class="headerlink" href="#command-line-arguments-for-the-shell-script-run-sample-datasets-sh" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Commands</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-h</span></tt></td>
<td>show list of available commands</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-txt</span></tt></td>
<td>run <tt class="docutils literal"><span class="pre">-watertxt</span></tt> and <tt class="docutils literal"><span class="pre">-watertxtcmp</span></tt> using the <a class="reference external" href="data/watertxt-datafiles">sample WATER simulation output TEXT files</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-xml</span></tt></td>
<td>run <tt class="docutils literal"><span class="pre">-waterxml</span></tt> and <tt class="docutils literal"><span class="pre">-waterxmlcmp</span></tt> using the <a class="reference external" href="data/waterxml-datafiles">sample WATER simulation output XML files</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-wateruse</span></tt></td>
<td>run and apply <a class="reference external" href="data/wateruse-datafiles">water use data</a> to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-subwateruse</span></tt></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-gcmdelta</span></tt></td>
<td>run and apply <a class="reference external" href="data/gcmdelta-datafiles">global climate model data</a> to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-subgcmdelta</span></tt></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-oasis</span></tt></td>
<td>create an oasis formated water use output file using the <a class="reference external" href="data/sample-water-simulations/sample-datafiles/WATERUSE-WATER-basin0.txt">sample water use applied WATER TEXT file</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-ecoflowstationid</span></tt></td>
<td>create an ecoflow formated water use output file using the <a class="reference external" href="data/sample-water-simulations/sample-datafiles/WATERUSE-WATER-basin0.txt">sample water use applied WATER TEXT file</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-ecoflowdaxml</span></tt></td>
<td>create an ecoflow formated drainage area output file using the <a class="reference external" href="data/sample-water-simulations/sample-datafiles/WATERSimulation-basin0.xml">sample WATER XML file</a> to calculate basin area</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-ecoflowdashp</span></tt></td>
<td>create an ecoflow formated drainage area output file using the <a class="reference external" href="data/sample-water-simulations/sample-datafiles/basin0.shp">sample basin shapefiles</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-mapsim</span></tt></td>
<td>create maps for <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-all</span></tt></td>
<td>run (mostly) all commands; <tt class="docutils literal"><span class="pre">-tests</span></tt>, <tt class="docutils literal"><span class="pre">-txt</span></tt>, <tt class="docutils literal"><span class="pre">-xml</span></tt>, <tt class="docutils literal"><span class="pre">-wateruse</span></tt>, <tt class="docutils literal"><span class="pre">-gcmdelta</span></tt>, <tt class="docutils literal"><span class="pre">-oasis</span></tt>, <tt class="docutils literal"><span class="pre">-ecoflowstationid</span></tt>, <tt class="docutils literal"><span class="pre">-ecoflowdaxml</span></tt>, <tt class="docutils literal"><span class="pre">-ecoflowdashp</span></tt>, <tt class="docutils literal"><span class="pre">mapsim</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-tests</span></tt></td>
<td>run units tests use nosetests</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-makeclean</span></tt></td>
<td>cleans/removes all output of running sample dataset in in the <a class="reference external" href="data/sample-water-simulations">sample-water-simulations directory</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-apply-water-use-to-single-and-batch-simulations">
<h3>Example - apply water use to <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a>:<a class="headerlink" href="#example-apply-water-use-to-single-and-batch-simulations" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_sample_datasets.sh -wateruse
</pre></div>
</div>
</div>
</div>
<div class="section" id="applying-water-use-and-gcm-deltas-to-many-water-simulations-at-one-time-using-run-simulations-sh">
<h2>Applying water use and gcm deltas to many WATER simulations at one time using <a class="reference external" href="run_simulations.sh">run_simulations.sh</a><a class="headerlink" href="#applying-water-use-and-gcm-deltas-to-many-water-simulations-at-one-time-using-run-simulations-sh" title="Permalink to this headline">¶</a></h2>
<p>The shell script <a class="reference external" href="run_simulations.sh">run_simulations.sh</a> is a shell
script that can be used to automate the processing of many WATER
simulations. <a class="reference external" href="run_simulations.sh">run_simulations.sh</a> can be used to
apply water use and global climate change scenarios to multiple WATER
simulations that are contained in the same directory. A user will
provide a valid option along with the <strong>path to the directory containing
all the WATER simulations</strong> that need to be processed. This directory
should contain all the same type of WATER simulations <em>single</em> or
<em>batch</em>, but not both. A user should make sure that the proper settings
for processing a <em>single</em> or <em>batch</em> simulation are set in the
<em>user_settings.py</em> file. Note that the <em>simulation_directory</em> variable
will be ignored when using this script, but all the other settings will
be used accordingly.</p>
<div class="section" id="id2">
<h3>Usage:<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_simulations.sh [option] &lt;path-to-simulations-directory&gt;
$ run_simulations.sh [[[-applywateruse] [-applysubwateruse] [-applygcmdelta] [-applysubgcmdelta]] &lt;path-to-simulations-directory&gt; | [-h]]
</pre></div>
</div>
</div>
<div class="section" id="command-line-arguments-for-the-shell-script-run-simulations-sh">
<h3>Command line arguments for the shell script <a class="reference external" href="run_simulations.sh">run_simulations.sh</a>:<a class="headerlink" href="#command-line-arguments-for-the-shell-script-run-simulations-sh" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Commands</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-h</span></tt></td>
<td>show list of available commands</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-applywateruse</span></tt></td>
<td>run and apply <a class="reference external" href="data/wateruse-datafiles">water use data</a> to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-applysubwateruse</span></tt></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-applygcmdelta</span></tt></td>
<td>run and apply <a class="reference external" href="data/gcmdelta-datafiles">global climate model data</a> to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-applysubgcmdelta</span></tt></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="data/sample-water-simulations">single and batch simulations</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-apply-water-use-to-many-water-simulations">
<h3>Example - apply water use to many WATER simulations :<a class="headerlink" href="#example-apply-water-use-to-many-water-simulations" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_simulations.sh -applywateruse &lt;path-to-simulations-directory&gt;
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Automated tests for <strong>waterapputils</strong> were written using the
<a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a> library, and are
contained in the <em>tests</em> directory.
<a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a> must be installed in
order to run tests. Automated tests can be run using the <tt class="docutils literal"><span class="pre">nosetests</span></tt>
command at the project level directory (not within the <em>tests</em>
directory, but the <em>waterapputils</em> directory containing the <em>tests</em>
directory). A successful test run will look something like the
following:</p>
<div class="code sh highlight-python"><div class="highlight"><pre>$ pwd
/path/to/waterapputils

$ nosetests
SETUP: deltatxt tests
........TEARDOWN: deltatxt tests
...
SETUP: waterxml tests
........TEARDOWN: waterxml tests
--------------------------------------------------
Ran 91 tests in 1.049s

OK
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="repository-project-layout">
<h2>Repository/Project Layout<a class="headerlink" href="#repository-project-layout" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>bin/                                    # executables/scripts
data/                                   # sample data files to use with software and associated information
    deltas-gcm/                         # statistically downscaled global climate model data
    sample-water-simulations            # sample WATER application simulations and datasets
        sample-batch-simulation         # sample WATER application batch run simulation
        sample-datasets                 # sample WATER application simulation datasets
        sample-single-simulation        # sample WATER applicaiton single run simulation
    spatial-datafiles/                  # spatial data; shapefile format
    watertxt-datafiles/                 # sample WATER.txt files
    wateruse-batch-run/                 # sample batch run output from WATER
    wateruse-datafiles/                 # sample water use files
    waterxml-datafiles/                 # sample WATERSimulation.xml files
docs/                                   # Sphinx code documentation
tests/                                  # tests
    deltas_tests.py                     # tests for deltas module
    helpers_tests.py                    # tests for helper module
    spatialvectors_test.py              # tests for spatialvectors module
    watertxt_tests.py                   # tests for watertxt module
    wateruse_tests.py                   # tests for wateruse module
    waterxml_tests.py                   # tests for waterxml module
waterapputils/                          # directory containing code modules
    deltas.py                           # handles processing of global climate model data
    deltas_viewer.py                    # handles view (plotting) of global climate model data
    gcm_delta_processing.py             # handles the global climate model delta factors processing using settings from the user_settings.py file
    helpers.py                          # helper functions
    spatialdata_viewer.py               # handles view (mapping) of spatial data; uses basemap library
    spatialvectors.py                   # handles spatial data
    specific_output_file_processing.py  # handles specific output file processing for external OASIS and Ecoflow programs
    user_settings.py                    # user settings to control and specify data inputs for water use and global climate model processing along with control of naming outputs
    water_files_processing.py           # handles the WATER application output and database file processing using settings from the user_settings.py file
    waterapputils.py                    # main controller; calls respective module
    waterapputils_logging.py            # handles error logging
    watertxt.py                         # handles processing of WATER.txt simulation output files
    watertxt_viewer.py                  # handles view (plotting) of WATER.txt simulation output files
    wateruse.py                         # handles processing of water use data
    wateruse_processing.py              # handles the water use processing using settings from the user_settings.py file
    waterxml.py                         # handles processing of WATERSimulation.xml simulation database files
    waterxml_viewer.py                  # handles view (plotting) of  WATERSimulation.xml simulation database files
Makefile                                # makefile to help clean directories
LICENSE.txt                             # USGS Software User Rights Notice
README.md                               # README file
requirements.txt                        # list of requirements/dependencies
setup.py                                # code for building, distributing, and installing modules
run_sample_datasets.sh                  # bash script used to run specific or all sample datasets
run_simulations.sh                      # bash script used to apply water use and/or climate change factors to multiple WATER simulations
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="documentation-overview-guides-tutorials-code">
<h2>Documentation - overview, guides/tutorials, code<a class="headerlink" href="#documentation-overview-guides-tutorials-code" title="Permalink to this headline">¶</a></h2>
<p>HTML documentation was made using <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a>.
At this time the documentation can be viewed locally with a browser. The
main html page, <em>index.html</em>, is located in the
*waterapputils/docs/_build/html/* directory.</p>
</div>
<hr class="docutils" />
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>python == 2.7.6
numpy == 1.8.0
matplotlib == 1.3.1
nose == 1.3.0
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="disclaimer-and-notice">
<h2>Disclaimer and Notice<a class="headerlink" href="#disclaimer-and-notice" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>Please refer to the USGS Software User Rights Notice (LICENSE.txt or http://water.usgs.gov/software/help/notice/)
for complete use, copyright, and distribution information. The USGS provides no warranty, expressed or implied, as to the
correctness of the furnished software or the suitability for any purpose. The software has been tested, but as with any
complex software, there could be undetected errors. Users who find errors are requested to report them to the USGS.

References to non-USGS products, trade names, and (or) services are provided for information purposes only and do not
constitute endorsement or warranty, express or implied, by the USGS, U.S. Department of Interior, or U.S. Government, as
to their suitability, content, usefulness, functioning, completeness, or accuracy.

Although this program has been used by the USGS, no warranty, expressed or implied, is made by the USGS or the United
States Government as to the accuracy and functioning of the program and related program material nor shall the fact of
distribution constitute any such warranty, and no responsibility is assumed by the USGS in connection therewith.
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="author">
<h2>Author<a class="headerlink" href="#author" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>Jeremiah Lant
Hydrologist
U.S. Geological Survey
Kentucky Water Science Center
Louisville, Kentucky 40299
(502) 493-1949
jlant@usgs.gov
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Welcome to waterapputils&#8217;s documentation!</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="guide.html">General Guide</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2014, Jeremiah Lant.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>