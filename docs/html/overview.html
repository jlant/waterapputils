<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>waterapputils &mdash; waterapputils 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="waterapputils 1.0.0 documentation" href="index.html" />
    <link rel="next" title="General Guide and Tutorial" href="guide.html" />
    <link rel="prev" title="Welcome to waterapputils’s documentation!" href="index.html" /> 
  </head>
  <body role="document">

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="static/logo.png" border="0" alt="py4sci"/></a>
</div>


      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>waterapputils 1.0.0 documentation</span></a></h1>
        <h2 class="heading"><span>waterapputils</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Welcome to waterapputils&#8217;s documentation!</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="guide.html">General Guide and Tutorial</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <p><a class="reference external" href="http://www.usgs.gov/"><img alt="alt text" src="images/usgs-logo.png" /></a></p>
<div class="section" id="waterapputils">
<h1>waterapputils<a class="headerlink" href="#waterapputils" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><strong>waterapputils</strong> is a tool used for analyzing, processing, and updating
model simulations from the <a class="reference external" href="http://ky.water.usgs.gov/">U.S. Geological Survey Indiana and Kentucky
Water Science Centers (INKY)</a> WATER
application. <strong>waterapputils</strong> is written in
<a class="reference external" href="https://www.python.org/">Python</a>, and adds new functionality,
outside the WATER application, by allowing users to apply various
general circulation model projections using a change-factor (delta)
approach with data from the Coupled Model Intercomparison Project
(<a class="reference external" href="http://cmip-pcmdi.llnl.gov/cmip5/">CIMP5</a>), and aggregated water
use data to model simulations. <strong>waterapputils</strong> has a <a class="reference external" href="#command-line-interface">Command Line
Interface</a> and a <a class="reference external" href="#graphical-user-interface">Graphical User
Interface</a> along with bash scripts, <a class="reference external" href="#run-sample-datasets-shell-script">Run
Sample Datasets Shell Script</a> and
<a class="reference external" href="#process-many-simulation-shell-script">Process Many Simulations Shell
Script</a>, to help automate
processing tasks and run unit tests.</p>
<p>The WATER application is a graphical user interface, written in VB.NET,
wrapped around a variant of the rainfall-runoff model called Topmodel
(Topography based hydrological model) by Keith Beven, Professor at
Lancaster University. Topmodel estimates river discharge and spatial
soil water saturation patterns for a particular catchment basin using
topographic, climatic, and geological input data parameters. The
original WATER application was developed by the <a class="reference external" href="http://ky.water.usgs.gov/">U.S. Geological Survey
Indiana and Kentucky Water Science Centers
(INKY)</a>. References for the WATER
application include:</p>
<ul class="simple">
<li><a class="reference external" href="http://pubs.usgs.gov/sir/2009/5248/">Williamson T.N., Odom K.R., Newson J.K., Downs A.C., Nelson Jr.
H.L., Cinotto P.J., Ayers M.A. 2009. The Water Availability Tool for
Environmental Resources (WATER)—A water-budget modeling approach for
managing water-supply resources in Kentucky—Phase I—Data processing,
model development, and application to non-karst areas, U.S.
Geological Survey Scientific Investigations Report 2009-5248. pp.
34.</a></li>
<li><a class="reference external" href="https://www.soils.org/publications/sssaj/abstracts/77/3/877">Williamson T.N., Taylor C.J., Newson J.K. 2013. Significance of
Exchanging SSURGO and STATSGO Data When Modeling Hydrology in Diverse
Physiographic Terranes. Soil Science Society of America Journal
77:877-889. DOI:
10.2136/sssaj2012.0069.</a></li>
</ul>
<p>Some sample highlights of <strong>waterapputils</strong> include:</p>
<ul class="simple">
<li>Processes WATER simulation output files (<code class="docutils literal"><span class="pre">txt</span></code> format).</li>
<li>Processes WATER simulation database files that store information
about a particular model simulation (<code class="docutils literal"><span class="pre">xml</span></code> format).</li>
<li>Applies various statistically downscaled <strong>General Circulation
Models</strong> (GCM)s to model simulations for a particular watershed basin
or set of watershed basins based on the spatial intersection of the
watershed(s) of interest with the general circulation scenario
coverage of interest.</li>
<li>Applies <strong>water use</strong> data to model simulations for a particular for
a particular watershed basin or set of watershed basins based on the
spatial intersection of the watershed(s) of interest with the water
use coverage.</li>
<li>Generates plots of all parameters found in WATER output files
(<code class="docutils literal"><span class="pre">txt</span></code> format) with simple statistics.</li>
<li>Generates plots of timeseries parameters found in WATER simulation
database files (<code class="docutils literal"><span class="pre">xml</span></code> format).</li>
<li>Generates comparison and difference plots between two WATER
simulation output files.</li>
<li>Generates comparison and difference plots between two WATER
simulation database files.</li>
<li>Generates maps of study area for a particular model simulation using
<a class="reference external" href="http://matplotlib.org/basemap/">basemap</a></li>
<li>Logs errors and tracebacks.</li>
<li>A multi-threaded graphical user interface (GUI) called
<a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/waterapputils/waterapputils_gui.py">waterapputils_gui</a>.</li>
</ul>
<p>A sample image of processing and analyzing WATER output files the GUI:</p>
<div class="figure" id="id5">
<img alt="Process and analyze WATER output files" src="images/gui-watertxt.png" />
<p class="caption"><span class="caption-text">Process and analyze WATER output files</span></p>
</div>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="#version">Version</a></p>
<p><a class="reference external" href="#command-line-interface">Command Line Interface</a></p>
<p><a class="reference external" href="#run-sample-datasets-shell-script">Run Sample Datasets Shell Script</a></p>
<p><a class="reference external" href="#process-many-simulation-shell-script">Process Many Simulations Shell
Script</a></p>
<p><a class="reference external" href="#graphical-user-interface">Graphical User Interface</a></p>
<p><a class="reference external" href="#testing">Testing</a></p>
<p><a class="reference external" href="#repository-layout">Repository Layout</a></p>
<p><a class="reference external" href="#documentation">Documentation</a></p>
<p><a class="reference external" href="#tutorials">Tutorials</a></p>
<p><a class="reference external" href="#requirements">Requirements</a></p>
<p><a class="reference external" href="#disclaimer-and-notice">Disclaimer and Notice</a></p>
<p><a class="reference external" href="#author">Author</a></p>
</div>
<hr class="docutils" />
<div class="section" id="version">
<h2>Version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h2>
<p>1.0.0</p>
</div>
<hr class="docutils" />
<div class="section" id="command-line-interface">
<h2>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="usage">
<h3>Usage:<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py [option]
</pre></div>
</div>
</div>
<div class="section" id="command-line-arguments">
<h3>Command Line Arguments:<a class="headerlink" href="#command-line-arguments" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Commands</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-h</span></code></td>
<td>show list of available commands</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-watertxt</span></code></td>
<td>list WATER simulation output file(s) to process; <code class="docutils literal"><span class="pre">WATER.txt</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-watertxtfd</span></code></td>
<td>open file dialog window to select WATER simulation output file(s) to process; <code class="docutils literal"><span class="pre">WATER.txt</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-watertxtcmp</span></code></td>
<td>list 2 WATER simulation output file(s) to compare; <code class="docutils literal"><span class="pre">WATER.txt</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-watertxtcmpfd</span></code></td>
<td>open file dialog window to select 2 WATER simulation output file(s) to compare; <code class="docutils literal"><span class="pre">WATER.txt</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-waterxml</span></code></td>
<td>list WATER simulation database file(s) to process; <code class="docutils literal"><span class="pre">WATERSimulation.xml</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-waterxmlfd</span></code></td>
<td>open file dialog window to select WATER simulation database file(s) to process; <code class="docutils literal"><span class="pre">WATERSimulation.xml</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-waterxmlcmp</span></code></td>
<td>list 2 WATER simulation database file(s) to compare; <code class="docutils literal"><span class="pre">WATERSimulation.xml</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-waterxmlcmpfd</span></code></td>
<td>open file dialog window to select 2 WATER simulation database files to compare; <code class="docutils literal"><span class="pre">WATERSimulation.xml</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-applygcmdeltas</span></code></td>
<td>apply general circulation model deltas to WATER simulation database file(s); <code class="docutils literal"><span class="pre">WATERSimulation.xml</span></code>; details specified in <code class="docutils literal"><span class="pre">user_settings.py</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-applysubgcmdeltas</span></code></td>
<td>apply updated general circulation model deltas from <code class="docutils literal"><span class="pre">sub_gcm_delta_info_file_name</span></code> variable in user_settings.py to WATER simulation database file(s); <code class="docutils literal"><span class="pre">WATERSimulation.xml</span></code>; details specified in <code class="docutils literal"><span class="pre">user_settings.py</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-applywateruse</span></code></td>
<td>apply water use data to WATER simulation output file(s); <code class="docutils literal"><span class="pre">WATER.txt</span></code>; details specified in <code class="docutils literal"><span class="pre">user_settings.py</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-applysubwateruse</span></code></td>
<td>apply water use data from <code class="docutils literal"><span class="pre">sub_wateruse_info_file_name</span></code> variable in user_settings.py to WATER simulation output file(s); <code class="docutils literal"><span class="pre">WATER.txt</span></code>; details specified in <code class="docutils literal"><span class="pre">user_settings.py</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-oasis</span></code></td>
<td>list WATER simulation output file(s) to process; creates output data file(s) for OASIS program - a tab delimited file(s) of timeseries of discharge; <strong>NOTE</strong>: WATER simulation output file must have the <code class="docutils literal"><span class="pre">Discharge</span> <span class="pre">+</span> <span class="pre">Water</span> <span class="pre">Use</span></code> column</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-ecoflowstationid</span></code></td>
<td>list WATER simulation output file(s) to process; creates output data file(s) for ecoflow program - a comma separated file(s) of timeseries of discharge for a specific basin (station) id</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-ecoflowdaxml</span></code></td>
<td>list WATER simulation database xml file(s) to process; creates output data file(s) for ecoflow program - a comma separated file(s) of basin (station) id and its respective drainage area in square miles calculated using data in the <code class="docutils literal"><span class="pre">WATERSimulation.xml</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-ecoflowdashp</span></code></td>
<td>list basin or watershed shapefiles to process; creates output data file(s) for ecoflow program - a comma separated file(s) of basin (station) id and its respective drainage area in square miles calculated from the shapefile(s)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-outfilename</span></code></td>
<td>OPTIONAL : output filename to be used with <code class="docutils literal"><span class="pre">-ecoflowdaxml</span></code> or <code class="docutils literal"><span class="pre">-ecoflowdashp</span></code> commands in writing the drainage area comma separated file</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-labelfield</span></code></td>
<td>OPTIONAL : label field name (basin number / station id) to be used with <code class="docutils literal"><span class="pre">-ecoflowdashp</span></code> command in writing the drainage area comma separated file; Default label field is the FID in the basin(s) shapefile</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-areafield</span></code></td>
<td>OPTIONAL : area field name in a basin(s) shapefile to be used with <code class="docutils literal"><span class="pre">-ecoflowdashp</span></code> command in writing the drainage area comma separated file; Default action is to calculate area from the shapefile(s)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-samplesingle</span></code></td>
<td>OPTIONAL : flag used with <code class="docutils literal"><span class="pre">-applywateruse</span></code>, <code class="docutils literal"><span class="pre">-applysubwateruse</span></code>, <code class="docutils literal"><span class="pre">-applygcmdeltas</span></code>, <code class="docutils literal"><span class="pre">-applysubgcmdeltas</span></code> to specify the use of the sample single simulation datasets</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-samplebatch</span></code></td>
<td>OPTIONAL : flag used with <code class="docutils literal"><span class="pre">-applywateruse</span></code>, <code class="docutils literal"><span class="pre">-applysubwateruse</span></code>, <code class="docutils literal"><span class="pre">-applygcmdeltas</span></code>, <code class="docutils literal"><span class="pre">-applysubgcmdeltas</span></code> to specify the use of the sample batch simulation datasets</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-simdir</span></code></td>
<td>OPTIONAL : flag used with <code class="docutils literal"><span class="pre">-applywateruse</span></code>, <code class="docutils literal"><span class="pre">-applysubwateruse</span></code>, <code class="docutils literal"><span class="pre">-applygcmdeltas</span></code>, <code class="docutils literal"><span class="pre">-applysubgcmdeltas</span></code> to specify a path to a specific WATER simulation instead of specifying it in <code class="docutils literal"><span class="pre">user_settings.py</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-processing-a-water-txt-file">
<h3>Example - processing a WATER.txt file<a class="headerlink" href="#example-processing-a-water-txt-file" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py -watertxt &lt;path-to-WATER.txt-file&gt;
</pre></div>
</div>
</div>
<div class="section" id="example-running-water-use-using-the-settings-in-user-settings-py">
<h3>Example - Running water use using the settings in user_settings.py<a class="headerlink" href="#example-running-water-use-using-the-settings-in-user-settings-py" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py -applywateruse
</pre></div>
</div>
</div>
<div class="section" id="example-running-water-use-by-supplying-a-path-to-a-simulations-directory-instead-of-specifying-the-simulations-directory-in-user-settings-py">
<h3>Example - Running water use by supplying a path to a simulations directory instead of specifying the simulations directory in user_settings.py<a class="headerlink" href="#example-running-water-use-by-supplying-a-path-to-a-simulations-directory-instead-of-specifying-the-simulations-directory-in-user-settings-py" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils.py -applywateruse -simdir &lt;path-to-simulations-directory&gt;
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="editing-settings-in-user-settings-py">
<h2>Editing settings in <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/waterapputils/user_settings.py">user_settings.py</a><a class="headerlink" href="#editing-settings-in-user-settings-py" title="Permalink to this headline">¶</a></h2>
<p>All the setting for running <strong>waterapputils</strong> are contained in
<a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/waterapputils/user_settings.py">user_settings.py</a>
file. A user can edit the settings by editing the Python string
variables. Most variables are <em>path</em> variables to required data files
and basin shapefile attribute variables. A user will typically only edit
the section called <em>WATER simulation information</em>. This section contains
information about a WATER simulation. A WATER simulation can be either a
<em>single</em> or a <em>batch</em> simulation. Each simulation type has a few
different outputs along with a different directory structure.</p>
<blockquote>
<div><div class="line-block">
<div class="line">A <em>single</em> simulation corresponds to basins that were <em>delineated</em> within the WATER application using a pour point.</div>
<div class="line">A <em>batch</em> simulation corresponds to basins that were <em>pre-delineated</em> and were used within the WATER application.</div>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="run-sample-datasets-shell-script">
<h2>Run Sample Datasets Shell Script<a class="headerlink" href="#run-sample-datasets-shell-script" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="run-sample-datasets-with-run-sample-datasets-sh">
<h2>Run sample datasets with <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/run_sample_datasets.sh">run_sample_datasets.sh</a><a class="headerlink" href="#run-sample-datasets-with-run-sample-datasets-sh" title="Permalink to this headline">¶</a></h2>
<p>The shell script
<a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/run_sample_datasets.sh">run_sample_datasets.sh</a>
is a shell script that can be used to run automated tests and run many
of the command line arguments using the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">sample
datasets</a>.</p>
<div class="section" id="id1">
<h3>Usage:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_sample_datasets.sh [option]
$ run_sample_datasets.sh [[[-txt] [-xml] [-wateruse] [-oasis] [-ecoflowstationid] [ecoflowdaxml] [-ecoflowdashp] [-gcmdelta] [-mapsim] [-all] [-tests] -makeclean] | [-h]]
</pre></div>
</div>
</div>
<div class="section" id="command-line-arguments-for-the-shell-script-run-sample-datasets-sh">
<h3>Command line arguments for the shell script <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/run_sample_datasets.sh">run_sample_datasets.sh</a>:<a class="headerlink" href="#command-line-arguments-for-the-shell-script-run-sample-datasets-sh" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Commands</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-h</span></code></td>
<td>show list of available commands</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-txt</span></code></td>
<td>run <code class="docutils literal"><span class="pre">-watertxt</span></code> and <code class="docutils literal"><span class="pre">-watertxtcmp</span></code> using the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/watertxt-datafiles">sample WATER simulation output TEXT files</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-xml</span></code></td>
<td>run <code class="docutils literal"><span class="pre">-waterxml</span></code> and <code class="docutils literal"><span class="pre">-waterxmlcmp</span></code> using the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/waterxml-datafiles">sample WATER simulation output XML files</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-wateruse</span></code></td>
<td>run and apply <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/wateruse-datafiles">water use data</a> to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-subwateruse</span></code></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-gcmdelta</span></code></td>
<td>run and apply <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/deltas-gcm">general circulation model data</a> to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-subgcmdelta</span></code></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-oasis</span></code></td>
<td>create an oasis formated water use output file using the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-datafiles/WATERUSE-WATER-basin0.txt">sample water use applied WATER TEXT file</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-ecoflowstationid</span></code></td>
<td>create an ecoflow formated water use output file using the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-datafiles/WATERUSE-WATER-basin0.txt">sample water use applied WATER TEXT file</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-ecoflowdaxml</span></code></td>
<td>create an ecoflow formated drainage area output file using the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-datafiles/WATERSimulation-basin0.xml">sample WATER XML file</a> to calculate basin area</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-ecoflowdashp</span></code></td>
<td>create an ecoflow formated drainage area output file using the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-datafiles/sample-datafiles/basin0.shp">sample basin shapefiles</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-mapsim</span></code></td>
<td>create maps for <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-all</span></code></td>
<td>run (mostly) all commands; <code class="docutils literal"><span class="pre">-tests</span></code>, <code class="docutils literal"><span class="pre">-txt</span></code>, <code class="docutils literal"><span class="pre">-xml</span></code>, <code class="docutils literal"><span class="pre">-wateruse</span></code>, <code class="docutils literal"><span class="pre">-gcmdelta</span></code>, <code class="docutils literal"><span class="pre">-oasis</span></code>, <code class="docutils literal"><span class="pre">-ecoflowstationid</span></code>, <code class="docutils literal"><span class="pre">-ecoflowdaxml</span></code>, <code class="docutils literal"><span class="pre">-ecoflowdashp</span></code>, <code class="docutils literal"><span class="pre">mapsim</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-tests</span></code></td>
<td>run units tests use nosetests</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-makeclean</span></code></td>
<td>cleans/removes all output of running sample dataset in in the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">sample-water-simulations directory</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-apply-water-use-to-single-and-batch-simulations">
<h3>Example - apply water use to <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a>:<a class="headerlink" href="#example-apply-water-use-to-single-and-batch-simulations" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_sample_datasets.sh -wateruse
</pre></div>
</div>
</div>
</div>
<div class="section" id="process-many-simulations-shell-script">
<h2>Process Many Simulations Shell Script<a class="headerlink" href="#process-many-simulations-shell-script" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="applying-water-use-and-gcm-deltas-to-many-water-simulations-using-run-simulations-sh">
<h2>Applying water use and gcm deltas to many WATER simulations using <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/run_simulations.sh">run_simulations.sh</a><a class="headerlink" href="#applying-water-use-and-gcm-deltas-to-many-water-simulations-using-run-simulations-sh" title="Permalink to this headline">¶</a></h2>
<p>The shell script
<a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/run_simulations.sh">run_simulations.sh</a>
is a shell script that can be used to automate the processing of many
WATER simulations.
<a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/run_simulations.sh">run_simulations.sh</a>
can be used to apply water use and general circulation model scenarios
to multiple WATER simulations that are contained in the same directory.
A user will provide a valid option along with the <strong>path to the
directory containing all the WATER simulations</strong> that need to be
processed. This directory should contain all the same type of WATER
simulations <em>single</em> or <em>batch</em>, but not both. A user should make sure
that the proper settings for processing a <em>single</em> or <em>batch</em> simulation
are set in the <em>user_settings.py</em> file. Note that the
<em>simulation_directory</em> variable will be ignored when using this script,
but all the other settings will be used accordingly.</p>
<div class="section" id="id2">
<h3>Usage:<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_simulations.sh [option] &lt;path-to-simulations-directory&gt;
$ run_simulations.sh [[[-applywateruse] [-applysubwateruse] [-applygcmdelta] [-applysubgcmdelta]] &lt;path-to-simulations-directory&gt; | [-h]]
</pre></div>
</div>
</div>
<div class="section" id="command-line-arguments-for-the-shell-script-run-simulations-sh">
<h3>Command line arguments for the shell script <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/blob/master/run_simulations.sh">run_simulations.sh</a>:<a class="headerlink" href="#command-line-arguments-for-the-shell-script-run-simulations-sh" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Commands</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-h</span></code></td>
<td>show list of available commands</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-applywateruse</span></code></td>
<td>run and apply <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/wateruse-datafiles">water use data</a> to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-applysubwateruse</span></code></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">-applygcmdelta</span></code></td>
<td>run and apply <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/deltas-gcm">general circulation model data</a> to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">-applysubgcmdelta</span></code></td>
<td>run and apply substitute water use data to sample WATER simulations; <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations">single and batch simulations</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-apply-water-use-to-many-water-simulations">
<h3>Example - apply water use to many WATER simulations :<a class="headerlink" href="#example-apply-water-use-to-many-water-simulations" title="Permalink to this headline">¶</a></h3>
<div class="code sh highlight-python"><div class="highlight"><pre>$ run_simulations.sh -applywateruse &lt;path-to-simulations-directory&gt;
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="graphical-user-interface">
<h2>Graphical user interface<a class="headerlink" href="#graphical-user-interface" title="Permalink to this headline">¶</a></h2>
<p>The multi-threaded graphical user interface (GUI) called
<a class="reference external" href="waterapputils/waterapputils_gui.py">waterapputils_gui</a> can be
started using the command below or by simply double clicking on the
<code class="docutils literal"><span class="pre">waterapputils_gui.py</span></code> file.</p>
<div class="code sh highlight-python"><div class="highlight"><pre>$ python waterapputils_gui.py
</pre></div>
</div>
<p>The GUI consists of 4 tabs:</p>
<ol class="arabic simple">
<li>Process WATER output text file</li>
<li>Compare 2 WATER output text files</li>
<li>Apply water use to WATER simulations</li>
<li>Apply general circulation model (GCM) deltas to WATER simulations</li>
</ol>
<div class="section" id="process-water-output-text-file">
<h3>Process WATER output text file<a class="headerlink" href="#process-water-output-text-file" title="Permalink to this headline">¶</a></h3>
<p>A user opens a WATER simulation output text file (WATER.txt), and all
the paramters and corresponding data are processed. The first parameter
in the data file is plotted initially and the user can use the list on
the bottom left of the tab to select different parameters to plot. The
plot includes a text area showing some simple statistics for the
parameter. All the parameters and corresponding data are also placed in
a read-only table. A user can interact with the plot using the buttons
on the top of the plotting area (zoom, pan, etc.). In addition, a user
can enable a <strong>span selector</strong> which allows a user to query the data for
specific time periods. Upon using the <strong>span selector</strong>, the simple
stats displayed in the text area with the simple statistics updates for
the selected time period.</p>
</div>
<div class="section" id="compare-2-water-output-text-files">
<h3>Compare 2 WATER output text files<a class="headerlink" href="#compare-2-water-output-text-files" title="Permalink to this headline">¶</a></h3>
<p>A user opens 2 WATER simulation output text files, and the <strong>Compare</strong>
button will be enabled. Upon clicking the <strong>Compare</strong> button, all the
parameters and corresponding data are processed and compared. The first
parameters in the data file are overlayed together with the first file
colored as blue and the second file colored as red. A second plot is
made which shows the difference between the respective parameters in
each file. The user can use the list on the bottom left of the tab to
select different parameters to compare. All the parameters and
corresponding data for both files are placed in read-only tables. A user
can interact with the plots using the buttons on the top of the plotting
area (zoom, pan, etc.). Note that the difference plot is tied to the
overlay plot, meaning that when a user pans or zooms on the overlay
plot, the difference plot will zoom or pan with the overlay plot.</p>
</div>
<div class="section" id="apply-water-use-to-water-simulations">
<h3>Apply water use to WATER simulations<a class="headerlink" href="#apply-water-use-to-water-simulations" title="Permalink to this headline">¶</a></h3>
<p>Allows a user to apply water use data to WATER simulation output text
files (WATER.txt).</p>
<div class="section" id="number-of-simulation-s-a-user-selects-the-number-of-water-simulations">
<h4>Number of simulation(s) - a user selects the number of WATER simulations.<a class="headerlink" href="#number-of-simulation-s-a-user-selects-the-number-of-water-simulations" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><em>One simulation</em> (default) - one batch or single type WATER
simulation.</p>
</li>
<li><p class="first"><em>Multiple simulations</em> - more than one batch or single type WATER
simulations.</p>
<blockquote>
<div><p><strong>NOTE: The directory containing all the WATER simulations to
process must *only* contain WATER simulations. Do not include
extraneous files or directories in the parent directory containing
all the WATER simulations to process.</strong></p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="type-of-simulation-s-a-user-selects-the-type-of-water-simulation">
<h4>Type of simulation(s) - a user selects the type of WATER simulation.<a class="headerlink" href="#type-of-simulation-s-a-user-selects-the-type-of-water-simulation" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><em>Batch</em> - more than one pre-delineated basin. For an example, please
see the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-batch-simulation">Sample Batch
Simulation</a>.</li>
<li><em>Single</em> - one delineated basin. For an example, please see the
<a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-single-simulation">Sample Single
Simulation</a>.</li>
</ul>
<p>The following are the directory structures created by WATER for batch
and single simulations:</p>
<p><strong>Batch Simulation:</strong></p>
<div class="highlight-python"><div class="highlight"><pre>simulation/
            basin1/
                    amask/
                    basinmask/
                    fmask/
                    info/
                    rmask/
                    Temp/
                    .
                    .
                    WATER.txt
                    WATERSimulation.xml
            basin2/
            basin3/
            .
            .
            Water.txt
            Watersheds.shp
</pre></div>
</div>
<p><strong>Single Simulation:</strong></p>
<div class="highlight-python"><div class="highlight"><pre>simulation/
            amask/
            basinmask/
            fmask/
            info/
            rmask/
            Temp/
            .
            .
            basinMask.shp
            WATER.txt
            WATERSimulation.xml
</pre></div>
</div>
</div>
<div class="section" id="simulation-information-a-user-selects-the-water-simulation-of-interest-to-apply-water-use-too">
<h4>Simulation Information - a user selects the WATER simulation of interest to apply water use too.<a class="headerlink" href="#simulation-information-a-user-selects-the-water-simulation-of-interest-to-apply-water-use-too" title="Permalink to this headline">¶</a></h4>
<p>If a valid WATER simulation is selected, the rest of the inputs in the
<em>Simulation Information</em> section will auto-populate. A user can select
the proper <em>Basin shapefile id field</em> that was used when running the
WATER application. The <em>Basin shapefile id field</em> is was used by the
WATER application to name the output basin directories in the simulation
directory structure. The <em>Basin shapefile area field</em> is used to get the
areas of each respective basin for use in an external ecoflow program.</p>
<blockquote>
<div><strong>NOTE: A batch WATER simulation will contain a shapefile of the
basins called *Watersheds.shp*. A single WATER simulation will
contain a shapefile of the basin called *basinMask.shp*. A WATER
simulation must have an associated *Watersheds.shp* or
*basinMask.shp* file.</strong></div></blockquote>
</div>
<div class="section" id="water-use-information-a-user-selects-the-seasonal-water-use-data-files-and-associated-information">
<h4>Water Use Information - a user selects the seasonal water use data files and associated information.<a class="headerlink" href="#water-use-information-a-user-selects-the-seasonal-water-use-data-files-and-associated-information" title="Permalink to this headline">¶</a></h4>
<p>A user selects 4 seasonal water use files:</p>
<ol class="arabic simple">
<li>January, Feburary, March</li>
<li>April, May, June</li>
<li>July, August, September</li>
<li>October, November, December</li>
</ol>
<p>A user selects a water use factor file which can be used to adjust the
water use data values in the seasonal water use files.</p>
<p>A user selects the water use shapefile which is a shapefile of water use
points across the entire modeling domain.</p>
<blockquote>
<div><strong>NOTE: All WATER application shapefiles are in the Albers NAD83
projection. Please ensure that the water use shapefile is in the
same projection as all the other WATER application shapefiles.</strong></div></blockquote>
<p>A user chooses the id field from the water use shapefile that
corresponds to the id field used in the water use data files.</p>
<blockquote>
<div><strong>NOTE: The sample water use files and water use shapefile have
*newhydroid* as the id field.</strong></div></blockquote>
<p>If the basins in the WATER use simulation do not overlap/intersect with
the water use shapefile points, then the user can choose to apply
substitute water use.</p>
<blockquote>
<div><strong>NOTE: In order to apply substitute water use, the user must first
apply water use without this option. The waterapputils program will
warn and log any basins in the WATER simulation that do not
overlap/intersect with the water use shapefile points.
The waterapputils program will create a file called
*wateruse_non_intersecting_centroids.txt* in a directory called
*waterapputils-info* with a list of the basins that do not
overlap/intersect. A user must manually enter the proper water use
shapefile id (i.e. newhydroid) values to be used when applying the
substitute water use. In order to apply substitute water use, the
file called *wateruse_non_intersecting_centroids.txt* in a
directory called *waterapputils-info* must exist.</strong></div></blockquote>
<p>A user clicks the <em>Check Inputs</em> button which checks and makes sure that
all the fields have been entered. Upon all the fields being entered and
the <em>ChecK Inputs</em> button being pressed, the <em>Apply Water Use</em>, <em>Plot
Overview Map</em>, and <em>Plot Zoomed Map</em> buttons are enabled. If a user
clicks the <em>Apply Water Use</em>, then waterapputils applies water use to
the WATER simulation given the data provided by the user. The
<strong>waterapputils_gui</strong> will apply water use in a <em>separate thread</em>
meaning that the process will be run in the background allowing the user
to continue using other parts of the <strong>waterapputils_gui</strong> without
interferring with the water use processing.</p>
<blockquote>
<div><strong>NOTE: When processing water use, a warning about a *QPixmap* may
appear. This is not an error, but only a warning that can safely be
ignored here. The warning stems from the use of using the same
plotting code used in the command line version of waterapputils when
applying water use.</strong> If a user clicks the <em>Plot Overview Map</em>, a
map of the WATER basin shapefile (Watersheds.shp or basinMask.shp)
will be plotted in a zoomed out view or the entire modeling domain.
If a user clicks the <em>Plot Zoomed Map</em>, a map of the WATER basin
shapefile (Watersheds.shp or basinMask.shp) will be plotted in a
zoomed in view with additional shapefiles (i.e. usgs gages).</div></blockquote>
</div>
</div>
<div class="section" id="apply-general-circulation-model-gcm-deltas-to-water-simulations">
<h3>Apply general circulation model (GCM) deltas to WATER simulations<a class="headerlink" href="#apply-general-circulation-model-gcm-deltas-to-water-simulations" title="Permalink to this headline">¶</a></h3>
<p>Allows a user to apply general circulation model (GCM) deltas to WATER
simulation database files (WATERSimulation.xml).</p>
<div class="section" id="id3">
<h4>Number of simulation(s) - a user selects the number of WATER simulations.<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><em>One simulation</em> (default) - one batch or single type WATER
simulation.</p>
</li>
<li><p class="first"><em>Multiple simulations</em> - more than one batch or single type WATER
simulations.</p>
<blockquote>
<div><p><strong>NOTE: The directory containing all the WATER simulations to
process must *only* contain WATER simulations. Do not include
extraneous files or directories in the parent directory containing
all the WATER simulations to process.</strong></p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id4">
<h4>Type of simulation(s) - a user selects the type of WATER simulation.<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><em>Batch</em> - more than one basin. For an example, please see the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-batch-simulation">Sample
Batch
Simulation</a>.</li>
<li><em>Single</em> - one basin. For an example, please see the <a class="reference external" href="https://github.com/jlant-usgs/waterapputils/tree/master/data/sample-water-simulations/sample-single-simulation">Sample Single
Simulation</a>.</li>
</ul>
<p>The following are the directory structures created by WATER for batch
and single simulations:</p>
<p><strong>Batch Simulation:</strong></p>
<div class="highlight-python"><div class="highlight"><pre>simulation/
            basin1/
                    amask/
                    basinmask/
                    fmask/
                    info/
                    rmask/
                    Temp/
                    .
                    .
                    WATER.txt
                    WATERSimulation.xml
            basin2/
            basin3/
            .
            .
            Water.txt
            Watersheds.shp
</pre></div>
</div>
<p><strong>Single Simulation:</strong></p>
<div class="highlight-python"><div class="highlight"><pre>simulation/
            amask/
            basinmask/
            fmask/
            info/
            rmask/
            Temp/
            .
            .
            basinMask.shp
            WATER.txt
            WATERSimulation.xml
</pre></div>
</div>
</div>
<div class="section" id="simulation-information-a-user-selects-the-water-simulation-of-interest-to-apply-general-circulation-model-deltas-too">
<h4>Simulation Information - a user selects the WATER simulation of interest to apply general circulation model deltas too.<a class="headerlink" href="#simulation-information-a-user-selects-the-water-simulation-of-interest-to-apply-general-circulation-model-deltas-too" title="Permalink to this headline">¶</a></h4>
<p>If a valid WATER simulation is selected, the rest of the inputs in the
<em>Simulation Information</em> section will auto-populate. A user can select
the proper <em>Basin shapefile id field</em> that was used when running the
WATER application. The <em>Basin shapefile id field</em> is was used by the
WATER application to name the output basin directories in the simulation
directory structure. The <em>Basin shapefile area field</em> is used to get the
areas of each respective basin for use in an external ecoflow program.</p>
<blockquote>
<div><strong>NOTE: A batch WATER simulation will contain a shapefile of the
basins called *Watersheds.shp*. A single WATER simulation will
contain a shapefile of the basin called *basinMask.shp*. A WATER
simulation must have an associated *Watersheds.shp* or
*basinMask.shp* file.</strong></div></blockquote>
</div>
<div class="section" id="general-circulation-model-delta-information-a-user-selects-3-general-circulation-model-delta-files-and-associated-information">
<h4>General Circulation Model Delta Information - a user selects 3 general circulation model delta files and associated information.<a class="headerlink" href="#general-circulation-model-delta-information-a-user-selects-3-general-circulation-model-delta-files-and-associated-information" title="Permalink to this headline">¶</a></h4>
<p>A user selects 3 general circulation model delta files:</p>
<ol class="arabic simple">
<li>PET.txt</li>
<li>Ppt.txt</li>
<li>Tmax.txt</li>
</ol>
<p>A user selects the general circulation model shapefile which is a
shapefile of rectangular tiles for a particular general circulation
model that covers the entire modeling domain.</p>
<blockquote>
<div><strong>NOTE: All WATER application shapefiles are in the Albers NAD83
projection. Please ensure that the general circulation model
shapefile shapefile is in the same projection as all the other WATER
application shapefiles.</strong></div></blockquote>
<p>A user chooses the id field from the general circulation model shapefile
that corresponds to the id field used in the 3 general circulation model
delta files.</p>
<blockquote>
<div><strong>NOTE: The sample general circulation model delta files and general
circulation model shapefile have *Tile* as the id field.</strong></div></blockquote>
<p>If the basins in the WATER use simulation do not overlap/intersect with
the general circulation model shapefile tiles, then the user can choose
to apply substitute general circulation model deltas.</p>
<blockquote>
<div><strong>NOTE: In order to apply substitute general circulation model
deltas, the user must first apply general circulation model deltas
without this option. The waterapputils program will warn and log any
basins in the WATER simulation that do not overlap/intersect with
the general circulation model deltas shapefile tiles.
The waterapputils program will create a file called
*gcm_delta_non_intersecting_tiles.txt* in a directory called
*waterapputils-info* with a list of the basins that do not
overlap/intersect. A user must manually enter the proper general
circulation model deltas shapefile id (i.e. Tile) values to be used
when applying the substitute general circulation model deltas. In
order to apply substitute general circulation model deltas, the file
called *gcm_delta_non_intersecting_tiles.txt* in a directory
called *waterapputils-info* must exist.</strong></div></blockquote>
<p>A user clicks the <em>Check Inputs</em> button which checks and makes sure that
all the fields have been entered. Upon all the fields being entered and
the <em>ChecK Inputs</em> button being pressed, the <em>Apply Water Use</em>, <em>Plot
Overview Map</em>, and <em>Plot Zoomed Map</em> buttons are enabled. If a user
clicks the <em>Apply General Circulation Model Deltas</em>, then waterapputils
applies general circulation model deltas to the WATER simulation given
the data provided by the user. The <strong>waterapputils_gui</strong> will apply
general circulation model deltas in a <em>separate thread</em> meaning that the
process will be run in the background allowing the user to continue
using other parts of the <strong>waterapputils_gui</strong> without interferring
with the general circulation model deltas processing.</p>
<blockquote>
<div><strong>NOTE: When processing general circulation model deltas, a warning
about a *QPixmap* may appear. This is not an error, but only a
warning that can safely be ignored here. The warning stems from the
use of using the same plotting code used in the command line version
of waterapputils when applying general circulation model deltas.</strong>
If a user clicks the <em>Plot Overview Map</em>, a map of the WATER basin
shapefile (Watersheds.shp or basinMask.shp) will be plotted in a
zoomed out view or the entire modeling domain. If a user clicks the
<em>Plot Zoomed Map</em>, a map of the WATER basin shapefile
(Watersheds.shp or basinMask.shp) will be plotted in a zoomed in
view with additional shapefiles (i.e. usgs gages).</div></blockquote>
</div>
</div>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Automated tests for <strong>waterapputils</strong> were written using the
<a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a> library, and are
contained in the <em>tests</em> directory.
<a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a> must be installed in
order to run tests. Automated tests can be run using the <code class="docutils literal"><span class="pre">nosetests</span></code>
command at the project level directory (not within the <em>tests</em>
directory, but the <em>waterapputils</em> directory containing the <em>tests</em>
directory). A successful test run will look something like the
following:</p>
<div class="code sh highlight-python"><div class="highlight"><pre>$ pwd
/path/to/waterapputils

$ nosetests
SETUP: deltatxt tests
........TEARDOWN: deltatxt tests
...
SETUP: waterxml tests
........TEARDOWN: waterxml tests
--------------------------------------------------
Ran 91 tests in 1.049s

OK
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="repository-layout">
<h2>Repository layout<a class="headerlink" href="#repository-layout" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>bin/                                    # executables/scripts
data/                                   # sample data files to use with software and associated information
    deltas-gcm/                         # statistically downscaled general circulation model data
    sample-water-simulations            # sample WATER application simulations and datasets
        sample-batch-simulation         # sample WATER application batch run simulation
        sample-datasets                 # sample WATER application simulation datasets
        sample-single-simulation        # sample WATER application single run simulation
    spatial-datafiles/                  # spatial data; shapefile format
    watertxt-datafiles/                 # sample WATER.txt files
    wateruse-batch-run/                 # sample batch run output from WATER
    wateruse-datafiles/                 # sample water use files
    waterxml-datafiles/                 # sample WATERSimulation.xml files
docs/                                   # Sphinx code documentation
tests/                                  # tests
    deltas_tests.py                     # tests for deltas module
    helpers_tests.py                    # tests for helper module
    spatialvectors_test.py              # tests for spatialvectors module
    watertxt_tests.py                   # tests for watertxt module
    wateruse_tests.py                   # tests for wateruse module
    waterxml_tests.py                   # tests for waterxml module
waterapputils/                          # directory containing code modules
    waterapputils.py                    # main controller; calls respective module
    user_settings.py                    # user settings to control and specify data inputs for water use and general circulation model processing along with control of naming outputs
    gui/                                    # gui specific files
    modules/
        deltas.py                           # handles processing of general circulation model data
        deltas_viewer.py                    # handles view (plotting) of general circulation model data
        gcm_delta_processing.py             # handles the general circulation model delta factors processing using settings from the user_settings.py file
        helpers.py                          # helper functions
        spatialdata_viewer.py               # handles view (mapping) of spatial data; uses basemap library
        spatialvectors.py                   # handles spatial data
        specific_output_file_processing.py  # handles specific output file processing for external OASIS and Ecoflow programs
        water_files_processing.py           # handles the WATER application output and database file processing using settings from the user_settings.py file
        waterapputils_logging.py            # handles error logging
        watertxt.py                         # handles processing of WATER.txt simulation output files
        watertxt_viewer.py                  # handles view (plotting) of WATER.txt simulation output files
        wateruse.py                         # handles processing of water use data
        wateruse_processing.py              # handles the water use processing using settings from the user_settings.py file
        waterxml.py                         # handles processing of WATERSimulation.xml simulation database files
        waterxml_viewer.py                  # handles view (plotting) of  WATERSimulation.xml simulation database files
Makefile                                # makefile to help clean directories
LICENSE.txt                             # USGS Software User Rights Notice
README.md                               # README file
requirements.txt                        # list of requirements/dependencies
setup.py                                # code for building, distributing, and installing modules
run_sample_datasets.sh                  # bash script used to run specific or all sample datasets
run_simulations.sh                      # bash script used to apply water use and/or climate change factors to multiple WATER simulations
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Documentation of the code, guides detailing the processes involved in
applying water use and the general circulation model deltas, additional
information about <em>waterapputils</em>, and a gallery of output images can be
found
<a class="reference external" href="http://jlant-usgs.github.io/waterapputils/docs/html/index.html">here.</a></p>
<p>Additionally, the documentation pages can be viewed by navigating
to the <code class="docutils literal"><span class="pre">docs/_build/html</span></code> directory and opening the <code class="docutils literal"><span class="pre">index.html</span></code>
file in a web browser (Chrome, Firefox, IE, etc.)</p>
</div>
<hr class="docutils" />
<div class="section" id="tutorials">
<h2>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h2>
<p>A series of video tutorials were made that describe and detail how to
use waterapputils using many of the example sample datasets.</p>
<p>The following are the tutorial topics covered:</p>
<ol class="arabic simple">
<li>General Overview</li>
<li>Command Line Interface</li>
<li>Graphical User Interface</li>
</ol>
<p>Download the waterapputils video tutorials from:</p>
<p><a class="reference external" href="ftp://ftpext.usgs.gov/pub/er/ky/louisville/jglant/waterapputils/waterapputils-video-tutorials.zip">ftp://ftpext.usgs.gov/pub/er/ky/louisville/jglant/waterapputils/waterapputils-video-tutorials.zip</a></p>
</div>
<hr class="docutils" />
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The following are a list of dependencies:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.python.org/">Python</a> == 2.7.6.1</li>
<li><a class="reference external" href="http://www.numpy.org/">NumPy</a> == 1.8.1</li>
<li><a class="reference external" href="http://matplotlib.org/">matplotlib</a> == 1.3.1</li>
<li><a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a> == 1.3.3</li>
<li><a class="reference external" href="http://matplotlib.org/basemap/">Basemap</a> == 1.0.2</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/GDAL/">GDAL</a> == 1.11.0</li>
<li><a class="reference external" href="http://www.riverbankcomputing.com/software/pyqt/download">PyQt4</a>
== 4.9.6</li>
</ul>
<p>Instead of installing the dependencies independently, it may be more
convenient to install one of the following scientific Python
distributions which will come bundled with most, if not all, of the
dependencies:</p>
<ul class="simple">
<li><a class="reference external" href="https://code.google.com/p/pythonxy/">pythonxy</a></li>
<li><a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a></li>
<li><a class="reference external" href="https://www.enthought.com/">Enthought</a></li>
</ul>
<p>The PythonXY 2.7.6.1 version (which includes all the requirements listed above) and the Basemap 1.0.2 plugin can be downloaded from the following ftp site: <a class="reference external" href="ftp://ftpext.usgs.gov/pub/er/ky/louisville/jglant/waterapputils/waterapputils-pythonxy2.7.6.1-downloads.zip">ftp://ftpext.usgs.gov/pub/er/ky/louisville/jglant/waterapputils/waterapputils-pythonxy2.7.6.1-downloads.zip</a></p>
</div>
<hr class="docutils" />
<div class="section" id="disclaimer-and-notice">
<h2>Disclaimer and Notice<a class="headerlink" href="#disclaimer-and-notice" title="Permalink to this headline">¶</a></h2>
<p>This software has been approved for release by the U.S. Geological Survey (USGS). Although the software has been subjected to rigorous review, the USGS reserves the right to update the software as needed pursuant to further analysis and review. No warranty, expressed or implied, is made by the USGS or the U.S. Government as to the functionality of the software and related material nor shall the fact of release constitute any such warranty. Furthermore, the software is released on condition that neither the USGS nor the U.S. Government shall be held liable for any damages resulting from its authorized or unauthorized use. Please refer to the USGS Software User Rights Notice (LICENSE.txt or <a class="reference external" href="http://water.usgs.gov/software/help/notice/">http://water.usgs.gov/software/help/notice/</a>) for complete use, copyright, and distribution information. Users who find errors are requested to report them to the USGS. Any use of trade, firm, or product names is for descriptive purposes only and does not imply
endorsement by the U.S. Government.</p>
</div>
<hr class="docutils" />
<div class="section" id="author">
<h2>Author<a class="headerlink" href="#author" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">Jeremiah Lant</div>
<div class="line">Hydrologist / United States Geological Survey</div>
<div class="line">9818 Bluegrass Parkway Louisville, Kentucky 40222</div>
<div class="line">Office: 502-493-1949 Fax: 502-493-1909</div>
<div class="line"><a class="reference external" href="mailto:jlant&#37;&#52;&#48;usgs&#46;gov">jlant<span>&#64;</span>usgs<span>&#46;</span>gov</a> | www.usgs.gov</div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Welcome to waterapputils&#8217;s documentation!</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="guide.html">General Guide and Tutorial</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>